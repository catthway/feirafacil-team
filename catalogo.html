<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cat√°logo - Feira F√°cil</title>
  <link rel="stylesheet" href="catalogo.css" />
  <script defer src="catalogo.js"></script>
</head>
<body>
  <div class="fundo"></div>

  <a href="index.html" class="voltar">Voltar</a>

  <div class="conteudo-central">
    <h1 class="titulo">Cat√°logo de Produtos</h1>

    <div class="catalogo-container">
      <div class="produtos">
        <h2>ü´ô Produtos Artesanais</h2>
        <div class="item">
          <img src="img/geleia.jpg" alt="Geleia Caseira" />
          <p>Geleia Caseira - R$10</p>
          <button onclick="adicionar('Geleia Caseira', 10)">Adicionar</button>
        </div>
        <div class="item">
          <img src="img/mel.jpg" alt="Mel Puro" />
          <p>Mel Puro - R$25</p>
          <button onclick="adicionar('Mel Puro', 25)">Adicionar</button>
        </div>
        <div class="item">
          <img src="img/sabonete.jpg" alt="Sabonete Natural" />
          <p>Sabonete Natural - R$7</p>
          <button onclick="adicionar('Sabonete Natural', 7)">Adicionar</button>
        </div>

        <h2>üçé Hortifruti</h2>
        <div class="item">
          <img src="img/banana.jpg" alt="Banana" />
          <p>Banana Prata (kg) - R$6,39</p>
          <button onclick="adicionar('Banana (kg)', 6.39)">Adicionar</button>
        </div>
        <div class="item">
          <img src="img/maca.jpg" alt="Ma√ß√£" />
          <p>Ma√ß√£ Fuji (kg) - R$8,50</p>
          <button onclick="adicionar('Ma√ß√£ (kg)', 8.5)">Adicionar</button>
        </div>

        <h2>ü•¨ Hortali√ßas</h2>
        <div class="item">
          <img src="img/alface.jpg" alt="Alface Crespa" />
          <p>Alface Crespa - R$4,99</p>
          <button onclick="adicionar('Alface Crespa', 4.99)">Adicionar</button>
        </div>
        <div class="item">
          <img src="img/cenoura.jpg" alt="Cenoura" />
          <p>Cenoura Vermelha (kg) - R$3,00</p>
          <button onclick="adicionar('Cenoura (kg)', 3)">Adicionar</button>
        </div>
      </div>

      <div class="carrinho">
        <h2>Carrinho</h2>
        <ul id="lista-carrinho"></ul>
        <p><strong>Total: R$<span id="total">0.00</span></strong></p>

        <div id="perguntas-pagamento" style="margin-top: 20px;">
          <label for="forma-pagamento">Como voc√™ vai pagar?</label>
          <select id="forma-pagamento" required>
            <option value="" disabled selected>Selecione a forma de pagamento</option>
            <option value="pix">Pix</option>
            <option value="dinheiro">Dinheiro</option>
            <option value="cartao">Cart√£o</option>
          </select>

          <div id="comprovante-container" style="display:none; margin-top: 10px;">
            <label for="link-comprovante">Cole o link do comprovante Pix:</label>
            <input type="url" id="link-comprovante" placeholder="https://..." />
          </div>

          <button onclick="finalizarCompra()" style="margin-top: 10px;">Finalizar compra</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    let carrinho = [];
    let total = 0;

    window.adicionar = function (nome, preco) {
      carrinho.push({ nome, preco });
      total += preco;
      atualizarCarrinho();
    };

    function atualizarCarrinho() {
      const lista = document.getElementById("lista-carrinho");
      const totalEl = document.getElementById("total");
      lista.innerHTML = "";

      carrinho.forEach((item, index) => {
        const li = document.createElement("li");
        li.innerHTML = `${item.nome} - R$${item.preco.toFixed(2)} 
          <button class="remove-btn" onclick="remover(${index})">‚ùå</button>`;
        lista.appendChild(li);
      });

      totalEl.textContent = total.toFixed(2);
    }

    window.remover = function (index) {
      total -= carrinho[index].preco;
      carrinho.splice(index, 1);
      atualizarCarrinho();
    };

    // Mostra ou oculta campo do comprovante Pix
    document.getElementById("forma-pagamento").addEventListener("change", function () {
      const comprovanteContainer = document.getElementById("comprovante-container");
      if (this.value === "pix") {
        comprovanteContainer.style.display = "block";
        document.getElementById("link-comprovante").required = true;
      } else {
        comprovanteContainer.style.display = "none";
        document.getElementById("link-comprovante").required = false;
      }
    });

    function finalizarCompra() {
      if (carrinho.length === 0) {
        alert("Carrinho vazio!");
        return;
      }

      const formaPagamento = document.getElementById("forma-pagamento").value;
      if (!formaPagamento) {
        alert("Por favor, selecione a forma de pagamento.");
        return;
      }

      const comprovante = document.getElementById("link-comprovante").value.trim();

      let mensagem = "Ol√° Dona Lourdes! Gostaria de fazer um pedido:%0A";

      carrinho.forEach(item => {
        mensagem += - ${item.nome} (R$${item.preco.toFixed(2)})%0A;
      });

      mensagem += %0ATotal: R$${total.toFixed(2)}%0A;
      mensagem += Forma de pagamento: ${formaPagamento.toUpperCase()}%0A;

      if (formaPagamento === "pix") {
        if (!comprovante) {
          alert("Por favor, cole o link do comprovante Pix.");
          return;
        }
        mensagem += Comprovante Pix: ${comprovante}%0A;
        mensagem += Pagamento j√° realizado! Obrigada.%0A;
      } else {
        mensagem += "Pagamento ser√° efetuado na entrega ou na retirada.%0A";
      }

      const numero = "5542999696273";
      const url = https://wa.me/${numero}?text=${mensagem};
      window.open(url, "_blank");
    }
  </script>
</body>
</html>
